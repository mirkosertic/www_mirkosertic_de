<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Service integration at UI level with server side includes(SSI) &middot; Mirko Sertic</title><meta name="description" content="Today, Microservices are a common software modeling technique. This style is based on the principles behind Domain-driven Design, where every bounded context is equivalent to a service. If we also take the Twelve-Factor App manifesto intoconsideration, we able to create scalable and cloud ready systems."><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="robots" content="index,follow"><meta property="og:title" content="Service integration at UI level with server side includes(SSI)"><meta property="og:description" content="Today, Microservices are a common software modeling technique. This style is based on the principles behind Domain-driven Design, where every bounded context is equivalent to a service. If we also take the Twelve-Factor App manifesto intoconsideration, we able to create scalable and cloud ready systems."><meta property="og:type" content="article"><meta property="og:url" content="https://www.mirkosertic.de/blog/2017/03/integration-at-ui-level-with-server-side-includes/"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="https://www.mirkosertic.de/css/site.css" rel="stylesheet" media="screen"><link rel="shortcut icon" type="image/x-icon" href="https://www.mirkosertic.de/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="https://www.mirkosertic.de/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://www.mirkosertic.de/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://www.mirkosertic.de/favicon-16x16.png"><link rel="manifest" href="https://www.mirkosertic.de/manifest.json"><link rel="mask-icon" href="https://www.mirkosertic.de/safari-pinned-tab.svg" color="#5bbad5"><script src="https://polyfill.io/v2/polyfill.min.js?features=default,IntersectionObserver"></script><meta name="theme-color" content="#ffffff"><script>var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-33614060-2', 'auto');
	
	ga('send', 'pageview');
}</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><header><nav class="navbar navbar-expand-md navbar-dark fixed-top" itemscope itemtype="http://www.schema.org/SiteNavigationElement"><div class="container"><a class="navbar-brand" href="https://www.mirkosertic.de/">www.mirkosertic.de</a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarCollapse"><ul class="navbar-nav mr-auto"><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/toolsgoodies" title="Tools &amp; Goodies">Tools &amp; Goodies</a></li><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/interestingbooks" title="Interesting Books">Interesting Books</a></li><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/favorites" title="My favorite postings">My favorite postings</a></li><li class="nav-item"><a itemprop="url" class="nav-link active" href="/post/" title="Blog">Blog</a></li></ul></div></div></nav></header><main role="main"><div itemprop="mainEntity" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header"><h1 class="post-title" itemprop="name headline">Service integration at UI level with server side includes(SSI)</h1><p class="post-date"><span class="icon"><i class="fa fa-calendar-check-o-white"></i></span><time datetime="2017-03-06" itemprop="datePublished">Mon, Mar 6, 2017</time> <span>by</span> <span itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name"><a href="https://twitter.com/mirkosertic" itemprop="url" rel="author">Mirko Sertic</a></span></span></p><p><span class="icon"><i class="fa fa-clock-white"></i></span><span>6 Minutes reading time</span></p><p class="post-tags"><span class="tag"><span class="icon"><i class="fa fa-tags-white"></i></span><a href="/tags/domain-driven-design">Domain-driven Design</a></span> ,&nbsp;<a href="/tags/integration">Integration</a> ,&nbsp;<a href="/tags/user-interface">User Interface</a> ,&nbsp;<a href="/tags/enterprise">Enterprise</a></p></header><article class="post-content clearfix" itemprop="articleBody"><div class="sect1"><h2 id="_microservices_everywhere">Microservices everywhere</h2><div class="sectionbody"><div class="paragraph"><p>Today, <a href="https://en.wikipedia.org/wiki/Microservices">Microservices</a> are a common software modeling technique. This style is based on the principles behind <a href="https://en.wikipedia.org/wiki/Domain-driven_design">Domain-driven Design</a>, where every bounded context is equivalent to a service. If we also take the <a href="https://12factor.net">Twelve-Factor App</a> manifesto into consideration, we able to create scalable and cloud ready systems.</p></div><div class="paragraph"><p>But this design can also lead to problems. If we take the Microservice design too far(<a href="https://en.wikipedia.org/wiki/Microservices">Nanoservices</a>), we are quickly getting way to much services we can handle and maintain. There is also the risk that we are somehow violating the original bounded context of our services, leading to lack of responsibility and functional encapsulation. Maybe the Microservices could degenerate to some kind of remote data access object. If we do not respect the principle of independently deployable units, we would be quickly creating a distributed, complex and very slow monolith.</p></div></div></div><div class="sect1"><h2 id="_rethinking_the_architecture">Rethinking the architecture</h2><div class="sectionbody"><div class="paragraph"><p>Well, what can we do? The problem can be the vast amount of services in our architecture, which also increases the number of interfaces we have to support and maintain. The solution might be to create fewer services, and not more! We create a system for every bounded context(see my <a href="https://www.mirkosertic.de/blog/2013/04/domain-driven-design-example/">A Domain-driven Design Example</a> to get in touch with Domain-driven Design), and include everything in this system, from database to application logic and even the user interface. This architecture style is called a <a href="http://scs-architecture.org">Self-Contained System</a>, and it is in fact the opposite of Nanoservices. SCS means Self-Contained System, not Self-Contained Service. So it can include one-to-many services, but as as argued above, it is a good idea to keep the number of services small, even inside a SCS. Every SCS provides a user interface, which can be anything, from RESTful APIs to a full blown HTML frontend(i will come to this later).</p></div><div class="paragraph"><p>Now, what is a SCS-Architecture? Basically it looks as follows:</p></div><div class="imageblock kroki"><div class="content"><img src="/media/scsarchitecture-c2c6596c2b18a33c6310c239380ff2ab995d6d21.svg" alt="scsarchitecture"></div></div><div class="paragraph"><p>Every SCS represents a bounded context with its own ubiquitous language. The main goal is to keep the SCS independent of each other to reduce coupling, deployment complexity and make them exchangeable. Every SCS is developed and maintained by exactly one team to reduce development and project management friction.</p></div><div class="paragraph"><p>Every SCS needs some kind of interface for its clients. It can be either a machine readable API, maybe RESTful and Hypermedia driven, or it can be a real user interface, perhaps based on HTML5 and JavaScript.</p></div><div class="paragraph"><p>The interesting point here is that a SCS is in fact a standalone application. It contains everything, from user interface to data access logic, just everything that is needed to fulfill the requirements of its bounded context.</p></div></div></div><div class="sect1"><h2 id="_user_interface_integration_patterns">User interface integration patterns</h2><div class="sectionbody"><div class="paragraph"><p>Now, we have a small set of SCS that form our solution. How can a real user work with these components? How does the user login? How does the user navigate? How does the user perform some use cases? The answer is simple. Instead of composing the systems at API level, we compose them at user interface level. We need to build a Portal!</p></div><div class="imageblock kroki"><div class="content"><img src="/media/userinterfaceaggregation-96f9eff1bffa3259dc75d5f483fac38b5dde1070.svg" alt="userinterfaceaggregation"></div></div><div class="paragraph"><p>But how to we build a portal? Years ago we had a thing called Java Portlet API. Java Portlets became not very popular, mostly due to the fact that they required a heavy weight Portal Server and most of the time they became a user interface nightmare, as the Portlet API was very limited in its abilities.</p></div><div class="paragraph"><p>Today, I wouldn’t use a Portal Server anymore. The portal for our SCS would be a simple application, delivering some HTML templates and adding the composition logic. User interface composition can basically be done at two points:</p></div><div class="ulist"><ul><li><p>Server side (HTTPd, NGINX)</p></li><li><p>Client side (Browser, JavaScript)</p></li></ul></div><div class="paragraph"><p>In the example above, we would use <a href="https://en.wikipedia.org/wiki/Server_Side_Includes">Server Side Includes</a> or SSI to perform page composition. SSI is available for Apache HTTPd and NGINX. The Portal HTML templates comes with the layout framework and special SSI directives for the parts that need to he included from our SCS. The SSI processor now processes the SSI directives before the final HTML code is sent to the client.</p></div><div class="paragraph"><p>After the final HTML is rendered in the browser, we might decide to update some parts of the site. This can be done by using client side composition with some plain old AJAX. Using this technique, we can save server bandwidth and greatly increase user experience. Even if the user has disabled JavaScript in the browser, this wouldn’t be an issue. In this case we can always switch back to server side page composition.</p></div><div class="paragraph"><p>HTML5 Microdata can be easily used to implement common navigation use cases. As mentioned above, every SCS is self contained, and they share nothing. In fact they are not even aware of each other! So, now does navigation work? Well, to every link we add some HTML5 Microdata. This Microdata is interpreted either on server or client side and the final link is generated. See <a href="https://www.mirkosertic.de/blog/2013/05/building-portals-with-javafx-html5-and-some-microdata/">Building Portals with JavaFX, HTML5 and some Microdata</a> to take a look at how this can be done.</p></div></div></div><div class="sect1"><h2 id="_common_issues">Common issues</h2><div class="sectionbody"><div class="paragraph"><p><strong>Session State Management</strong></p></div><div class="paragraph"><p>State management is a little bit more complex than in traditional web applications. The current user state (Logged in, etc.) must somehow be preserved. This can be done using Cookies and URL rewriting. The state authority is in our case the portal application. The session state identifier can be propagated using Cookies or other Information we put into the HTTP Header, as only the HTTP Request Headers are propagated properly using SSI. As mentioned above, links can be annotated with Microdata. If Cookies are disabled, the portal application can use the Microdata to URLEncode the required session identifier into every link. It could even use SSL Session Information to generate session identifier if Cookies are completely disabled.</p></div><div class="paragraph"><p><strong>Global stylesheets</strong></p></div><div class="paragraph"><p>It would be bad if every included SCS would look different. To make them look and feel the same, we have to establish a user interface style-guide, and maybe a pattern library can is used by all included SCS. This library could also provide a set of common stylesheets. Such pattern library can be included and distributed using the <a href="http://www.webjars.org/">WebJars</a> technology.</p></div><div class="paragraph"><p><strong>Search</strong></p></div><div class="paragraph"><p>A (full text) search across multiple SCS can be really hard to implement and maintain. The best thing you can do is to avoid such use cases. It this is not an option, try to isolate the whole search logic into its own SCS and use domain events to sync the data state between the origin SCS and the search SCS.</p></div><div class="paragraph"><p><strong>Other display technologies (Android, iOS)</strong></p></div><div class="paragraph"><p>This can be a real showstopper. Every mobile device has its own usability requirements, and maybe one common pattern library does not fitt well. Maybe you decide to implement the mobile app using native technologies, and not HTML5 hybrid technology. HTML can easily be integrated using the technique described above. For native mobile apps, we would still need to use the (REST) API of our SCS to make everything work. Books could be written about this topic, and maybe I will write someday something in this Blog. Till then, I will leave this open.</p></div></div></div><div class="sect1"><h2 id="_conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>I really like the idea of SCS, and it can really help to get out of the &#34;too-many-services-hell&#34;. Using user interface composition, we have the best of both worlds, functional decomposition for better focused product development and a single user interface to make our customers happy!</p></div></div></div><div class="metainfo"><span>&lt;&lt;Pevious posting: <a href="https://www.mirkosertic.de/blog/2017/02/improve-test-quality-with-mutationtesting/">Improve Test Quality with Mutation Testing</a></span> <span>Next posting: <a href="https://www.mirkosertic.de/blog/2017/06/compiling-bytecode-to-javascript/">Bytecoder : A Low Level Bytecode to JavaScript Transpiler</a>&gt;&gt;</span></div><p><i class="fa fa-github"></i>Git revision: <a href="https://github.com/mirkosertic/www_mirkosertic_de/commit/cc979591072921fa5ff02e922b96e4c4f4af8d50" target="_blank">cc97959</a></p></article></div><div class="comments"><div id="disqus-placeholder">Loading comments...</div><div id="disqus_thread"></div><script>'use strict';
        window.addEventListener("load", function(event) {
            var disqusLoaded = false;
            var disqusObserver = new IntersectionObserver(function(entries, observer) {
                entries.forEach(function(entry) {
                    if (!disqusLoaded && entry.isIntersecting) {
                        console.log("Loading Disqus");
                        disqusLoaded = true;

                        document.getElementById('disqus-placeholder').remove();

                        
                        var script = document.createElement('script');
                        script.src = '//www-mirkosertic-de.disqus.com/embed.js';
                        script.async = true;
                        script.setAttribute('data-timestamp', +new Date());
                        script.addEventListener('load', function () {
                            
                            DISQUS.reset({reload: true, config: false});
                        });
                        (document.head || document.body).appendChild(script);
                    }
                });
            }, {
                root: null,
                rootMargin: "0px",
                threshold: [0]
            });
            disqusObserver.observe(document.querySelector(".comments"));
        }, false);</script></div></main><footer><p>&copy; Mirko Sertic &middot; <a href="https://www.mirkosertic.de/global/impressum/index.html">Imprint / Impressum</a></p><address><strong itemprop="name">Mirko Sertic</strong><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress"><div itemprop="streetAddress">Josefine-Mauser-Str. 66</div><div itemprop="postalCode">48157 Münster</div><div itemprop="addressCountry">Germany</div></div><a class="icon" target="_top" href="mailto:mirko@mirkosertic.de"><i class="fa fa-envelope-white"></i></a> <a class="icon" target="_blank" href="https://www.mirkosertic.de/index.xml" itemprop="url"><i class="fa fa-rss-white"></i></a> <a class="icon" target="_blank" href="https://www.xing.com/profile/Mirko_Sertic" itemprop="url"><i class="fa fa-xing-white"></i></a> <a class="icon" target="_blank" href="https://twitter.com/mirkosertic" itemprop="url"><i class="fa fa-twitter-white"></i></a> <a class="icon" target="_blank" href="https://github.com/mirkosertic" itemprop="url"><i class="fa fa-github-white"></i></a> <a class="icon" target="_blank" href="https://de.linkedin.com/in/mirko-sertic-98882397" itemprop="url"><i class="fa fa-linkedin-white"></i></a></address><p class="float-right"><a href="#">Back to top</a></p></footer><script src="https://www.mirkosertic.de/js/bootstrap-native-v4.min.js"></script><script>function existsByCSSSelector(aSelector) {
        var element = document.querySelector(aSelector);
        if (element) {
            return true;
        }
        return false;
    }

    var Loader = function () { };
    Loader.prototype = {
        require: function (scripts, callback) {
            this.loadCount = 0;
            this.totalRequired = scripts.length;
            this.callback = callback;

            for (var i=0;i<scripts.length;i++) {
                this.writeScript(scripts[i]);
            }
        },
        loaded: function (evt) {
            this.loadCount++;

            if (this.loadCount==this.totalRequired && typeof this.callback=='function') this.callback.call();
        },
        writeScript: function (src) {
            var self = this;
            var s = document.createElement('script');
            s.type = "text/javascript";
            s.async = true;
            s.src = src;
            s.addEventListener('load', function (e) { self.loaded(e); }, false);
            var head = document.getElementsByTagName('head')[0];
            head.appendChild(s);
        }
    };

    if (existsByCSSSelector("pre.highlight code") > 0) {
        var loader = new Loader();
        loader.require(["https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"], function() {

            var additionalStylesheet = document.createElement('link');
            additionalStylesheet.rel = "stylesheet";
            additionalStylesheet.type = 'text/css';
            additionalStylesheet.media = "screen";
            additionalStylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css";

            var head = document.getElementsByTagName('head')[0];
            head.appendChild(additionalStylesheet);

            hljs.highlightAll();
        });
    }</script></body></html>