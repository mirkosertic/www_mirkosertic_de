<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>GWT vs. Dragome vs. TeaVM for Game Programming &middot; Mirko Sertic</title><meta name="description" content="Last year I wrote a cross platform game engine. It used a JavaFX based Game Authoring System and had a Java based Game Runtime, which was transpiled to different platforms such as Android, JavaScript over GWT and JavaFX."><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="generator" content="Hugo 0.49"><meta name="robots" content="index,follow"><meta property="og:title" content="GWT vs. Dragome vs. TeaVM for Game Programming"><meta property="og:description" content="Last year I wrote a cross platform game engine. It used a JavaFX based Game Authoring System and had a Java based Game Runtime, which was transpiled to different platforms such as Android, JavaScript over GWT and JavaFX."><meta property="og:type" content="article"><meta property="og:url" content="https://www.mirkosertic.de/blog/2014/12/gwt-vs-dragome-vs-teavm-for-game-programming/"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="https://www.mirkosertic.de/css/site.css" rel="stylesheet" media="screen"><link rel="shortcut icon" type="image/x-icon" href="https://www.mirkosertic.de/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="https://www.mirkosertic.de/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://www.mirkosertic.de/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://www.mirkosertic.de/favicon-16x16.png"><link rel="manifest" href="https://www.mirkosertic.de/manifest.json"><link rel="mask-icon" href="https://www.mirkosertic.de/safari-pinned-tab.svg" color="#5bbad5"><script src="https://polyfill.io/v2/polyfill.min.js?features=default,IntersectionObserver"></script><meta name="theme-color" content="#ffffff"><script type="application/javascript">var doNotTrack = false;
if (!doNotTrack) {
	window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
	ga('create', 'UA-33614060-2', 'auto');
	
	ga('send', 'pageview');
}</script><script async src="https://www.google-analytics.com/analytics.js"></script></head><body itemscope itemtype="http://schema.org/WebPage"><header><nav class="navbar navbar-expand-md navbar-dark fixed-top" itemscope itemtype="http://www.schema.org/SiteNavigationElement"><div class="container"><a class="navbar-brand" href="https://www.mirkosertic.de/">www.mirkosertic.de</a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarCollapse"><ul class="navbar-nav mr-auto"><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/toolsgoodies" title="Tools &amp; Goodies">Tools &amp; Goodies</a></li><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/interestingbooks" title="Interesting Books">Interesting Books</a></li><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/favorites" title="My favorite postings">My favorite postings</a></li><li class="nav-item"><a itemprop="url" class="nav-link active" href="/post/" title="Blog">Blog</a></li></ul></div></div></nav></header><main role="main"><div itemprop="mainEntity" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header"><h1 class="post-title" itemprop="name headline">GWT vs. Dragome vs. TeaVM for Game Programming</h1><p class="post-date"><span class="icon"><i class="fa fa-calendar-check-o-white"></i></span><time datetime="2014-12-18" itemprop="datePublished">Thu, Dec 18, 2014</time> <span>by</span> <span itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name"><a href="https://twitter.com/mirkosertic" itemprop="url" rel="author">Mirko Sertic</a></span></span></p><p><span class="icon"><i class="fa fa-clock-white"></i></span><span>4 Minutes reading time</span></p><p class="post-tags"><span class="tag"><span class="icon"><i class="fa fa-tags-white"></i></span><a href="/tags/compiler">Compiler</a></span> ,&nbsp;<a href="/tags/html5">HTML5</a> ,&nbsp;<a href="/tags/javafx">JavaFX</a> ,&nbsp;<a href="/tags/performance">Performance</a> ,&nbsp;<a href="/tags/web">Web</a> ,&nbsp;<a href="/tags/javascript">JavaScript</a></p></header><article class="post-content clearfix" itemprop="articleBody"><div class="paragraph"><p>Last year I wrote a <a href="https://www.mirkosertic.de/blog/2013/11/a-javafx-based-game-authoring-system/">cross platform game engine</a>. It used a JavaFX based Game Authoring System and had a Java based Game Runtime, which was transpiled to different platforms such as Android, JavaScript over GWT and JavaFX.</p></div><div class="paragraph"><p>Here is a screenshot of a simple platform game based on the GameEngine, some physics stuff and a lot of Java code:</p></div><div class="paragraph"><p><span class="image"><img src="/media/dukejumprunchrome.png" alt="dukejumprunchrome"></span></p></div><div class="paragraph"><p>Here is also a screenshot of the JavaFX based game authoring system while editing the example game:</p></div><div class="paragraph"><p><span class="image"><img src="/media/dukejumpruncomposer2014.png" alt="dukejumpruncomposer2014"></span></p></div><div class="paragraph"><p>The original Game Runtime was written in Java 7. Now Java 8 is available, and the question arises: Can I use cool new Java 8 language features such as Lambdas for the Game Engine?</p></div><div class="paragraph"><p>Well, there is an ugly limitation: GWT does even in Version 2.7.0 not support Java 8.</p></div><div class="paragraph"><p>Now, how can we deal with this? In the last months I came across some GWT alternatives such as <a href="http://www.dragome.com/">Dragome</a> and <a href="https://github.com/konsoletyper/teavm">TeaVM</a>. Both of them are Java Bytecode to JavaScript transpiler frameworks. In contrast to GWT which uses Java source code to generate JavaScript, Dragome and TeaVM both use JVM Bytecode to generate JavaScript. So as long as it is valid Bytecode, the program can be translated to JavaScript, even if it is Java 7, Java 8 or other JVM languages.</p></div><div class="paragraph"><p>Thanks to the <a href="http://alistair.cockburn.us/Hexagonal+architecture">hexagonal</a> domain-driven Architecture of the Game Engine, I can just add a new GameView to the Engine which will deal with the JavaScript framework specific rendering stuff.</p></div><div class="paragraph"><p>For the beginning, here is a small comparison of GWT, Dragome and TeaVM:</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Feature</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">GWT</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Dragome</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">TeaVM</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Generates JavaScript from</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Java source code</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JVM Bytecode</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JVM Bytecode</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Requirements for debug</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Browser plugin</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Any modern browser, no plugin required</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Incremental compiler</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Java 8</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Reflection</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Dynamic Proxies</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Bytecode instrumentation</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Code permutations</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Split compiling</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Make async calls with no callback</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Yes</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">JavaScript caching</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Perfect cache using hash functions</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">-</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">JavaScript integration</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JSNI(JavaScript comments in source code)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JNSI(explicit JavaScript invocation using a ScriptHelper class)</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">JSO(access JavaScript objects using annotated Java interfaces)</p></td></tr></tbody></table><div class="paragraph"><p>Beside the fact that Dragome supports reflections and GWT and TeaVM not, all three seems to be equivalent. Let&#8217;s take a look at the generated JavaScript code. The new Dragome and TeaVM GameViews both use the HTML5 Canvas, and the Java source code is almost equivalent beside the package names and some method names. Here is the comparison result:</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Measurement</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">GWT</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Dragome</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">TeaVM</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Compile time</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">22822 ms</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">12268 ms</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">8226 ms</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Size of JS in epitomized mode</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2300 kb</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">4984 kb</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">2120 kb</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Size of JS in optimized mode</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1012 kb</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">4984 kb</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">1096 kb</p></td></tr></tbody></table><div class="paragraph"><p>Now let&#8217;s take a look at runtime behavior. Are all three contenders equivalent in runtime behavior? Well, here are the profiling results(running in Chrome):</p></div><table class="tableblock frame-all grid-all stretch"><colgroup><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"><col style="width: 25%;"></colgroup><tbody><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Measurement</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">GWT</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Gragome / Dragome without cast check</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">TeaVM</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Frames / sec</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">60 / 60</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">60</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Average time for one game loop cycle</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">8 ms</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">10 ms / 8 ms</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">8 ms</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Time for physics and main game systems in the main loop</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obfuscation and in-lining enabled. No results available.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">5 ms / 4 ms</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">4 ms</p></td></tr><tr><td class="tableblock halign-left valign-top"><p class="tableblock">Time for game view rendering in the main loop</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">Obfuscation and in-lining enabled. No results available.</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">5 ms / 4 ms</p></td><td class="tableblock halign-left valign-top"><p class="tableblock">4 ms</p></td></tr></tbody></table><div class="paragraph"><p>GWT, Dragome and TeaVM are running at 60 frames per second in the browser, as this is the maximum speed for Window.requestAnimationFrame().</p></div><div class="sect1"><h2 id="_conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>Well, both Dragome and TeaVM are viable alternatives to GWT. From my point of view, the TeaVM JSO JavaScript integration feels more natural and encapsulates the JavaScript interaction better than the JNSI notation of Dragome and GWT. TeaVM and GWT have a better JavaScript size optimizing compiler than Dragome, as Dragome always compiles the whole classpath and JRE to JavaScript without dropping un referenced code. This is due to the fact that Dragome supports reflection in contrast to GWT and TeaVM. When it comes to performance, TeaVM, Dragome and GWT produce very effective JavaScript. Dragome comes with some type cast checking, which is enabled by default. Disabling this feature saves some processing time, but might break existing code.</p></div><div class="paragraph"><p>From my point of view, TeaVM is the clear winner for mobile game development. It is as fast as GWT and is not restricted to Java source code. The JavaScript size is very small and the compiler is the fastest one in my test. I really like the JSO syntax for JavaScript interaction as it feels natural and made me productive in a short time. Go TeaVM!</p></div><div class="paragraph"><p>Links:</p></div><div class="paragraph"><p>The source code is available for free on GitHub: <a href="https://github.com/mirkosertic/GameComposer">github.com/mirkosertic/GameComposer</a></p></div><div class="paragraph"><p>The Duke example game can be played here:</p></div><div class="paragraph"><p>GWT version: <a href="http://mirkosertic.github.io/GameComposer/games/gwt/platformer/index.html">mirkosertic.github.io/GameComposer/games/gwt/platformer/index.html</a></p></div><div class="paragraph"><p>TeaVM version: <a href="http://mirkosertic.github.io/GameComposer/games/teavm/platformer/index.html">mirkosertic.github.io/GameComposer/games/teavm/platformer/index.html</a></p></div><div class="paragraph"><p>Dragome version: <a href="http://mirkosertic.github.io/GameComposer/games/dragome/platformer/index.html">mirkosertic.github.io/GameComposer/games/dragome/platformer/index.html</a></p></div></div></div><div class="metainfo"><span>&lt;&lt;Pevious posting: <a href="https://www.mirkosertic.de/blog/2014/10/how-to-set-the-html-base-tag-in-a-jsp-page/">How to set the HTML base Tag in a JSP page</a></span> <span>Next posting: <a href="https://www.mirkosertic.de/blog/2015/03/tuning-html5-canvas-filltext/">Tuning HTML5 Canvas.fillText()</a>&gt;&gt;</span></div><p><i class="fa fa-github"></i>Git revision: <a href="https://github.com/mirkosertic/www_mirkosertic_de/commit/3ed1d0078678954b6e563504c944c6772231ab69" target="_blank">3ed1d00</a></p></article></div><div class="comments"><div id="disqus-placeholder">Loading comments...</div><div id="disqus_thread"></div><script>'use strict';
        window.addEventListener("load", function(event) {
            var disqusLoaded = false;
            var disqusObserver = new IntersectionObserver(function(entries, observer) {
                entries.forEach(function(entry) {
                    if (!disqusLoaded && entry.isIntersecting) {
                        console.log("Loading Disqus");
                        disqusLoaded = true;

                        document.getElementById('disqus-placeholder').remove();

                        
                        var script = document.createElement('script');
                        script.src = '//www-mirkosertic-de.disqus.com/embed.js';
                        script.async = true;
                        script.setAttribute('data-timestamp', +new Date());
                        script.addEventListener('load', function () {
                            
                            DISQUS.reset({reload: true, config: false});
                        });
                        (document.head || document.body).appendChild(script);
                    }
                });
            }, {
                root: null,
                rootMargin: "0px",
                threshold: [0]
            });
            disqusObserver.observe(document.querySelector(".comments"));
        }, false);</script></div></main><footer><p>&copy; Mirko Sertic &middot; <a href="https://www.mirkosertic.de/global/impressum/index.html">Imprint / Impressum</a></p><address><strong itemprop="name">Mirko Sertic</strong><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress"><div itemprop="streetAddress">Josefine-Mauser-Str. 66</div><div itemprop="postalCode">48157 MÃ¼nster</div><div itemprop="addressCountry">Germany</div></div><a class="icon" target="_top" href="mailto:mirko@mirkosertic.de"><i class="fa fa-envelope-white"></i></a> <a class="icon" target="_blank" href="https://www.mirkosertic.de/index.xml" itemprop="url"><i class="fa fa-rss-white"></i></a> <a class="icon" target="_blank" href="https://www.xing.com/profile/Mirko_Sertic" itemprop="url"><i class="fa fa-xing-white"></i></a> <a class="icon" target="_blank" href="https://twitter.com/mirkosertic" itemprop="url"><i class="fa fa-twitter-white"></i></a> <a class="icon" target="_blank" href="https://github.com/mirkosertic" itemprop="url"><i class="fa fa-github-white"></i></a> <a class="icon" target="_blank" href="https://de.linkedin.com/in/mirko-sertic-98882397" itemprop="url"><i class="fa fa-linkedin-white"></i></a></address><p class="float-right"><a href="#">Back to top</a></p></footer><script src="https://www.mirkosertic.de/js/bootstrap-native-v4.min.js"></script><script>function existsByCSSSelector(aSelector) {
        var element = document.querySelector(aSelector);
        if (element) {
            return true;
        }
        return false;
    }

    var Loader = function () { };
    Loader.prototype = {
        require: function (scripts, callback) {
            this.loadCount = 0;
            this.totalRequired = scripts.length;
            this.callback = callback;

            for (var i=0;i<scripts.length;i++) {
                this.writeScript(scripts[i]);
            }
        },
        loaded: function (evt) {
            this.loadCount++;

            if (this.loadCount==this.totalRequired && typeof this.callback=='function') this.callback.call();
        },
        writeScript: function (src) {
            var self = this;
            var s = document.createElement('script');
            s.type = "text/javascript";
            s.async = true;
            s.src = src;
            s.addEventListener('load', function (e) { self.loaded(e); }, false);
            var head = document.getElementsByTagName('head')[0];
            head.appendChild(s);
        }
    };

    if (existsByCSSSelector("pre.highlight code") > 0) {
        var loader = new Loader();
        loader.require(["https:\/\/www.mirkosertic.de\/js/highlight-9.9.0.min.js"], function() {

            var additionalStylesheet = document.createElement('link');
            additionalStylesheet.rel = "stylesheet";
            additionalStylesheet.type = 'text/css';
            additionalStylesheet.media = "screen";
            additionalStylesheet.href = "https:\/\/www.mirkosertic.de\/css/highlight.css";

            var head = document.getElementsByTagName('head')[0];
            head.appendChild(additionalStylesheet);

            hljs.initHighlightingOnLoad();
        });
    }</script></body></html>