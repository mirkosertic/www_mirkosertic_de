<!DOCTYPE html><html lang="en" prefix="og: http://ogp.me/ns#"><head><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Building Cross-Platform Games with JavaFX: A Modern Game Engine Adventure &middot; Mirko Sertic</title><meta name="description" content="Dive into an exciting journey of creating a versatile game engine that runs both on desktop and web browsers using JavaFX and GWT! Experience the perfect harmony of domain-driven design, CDI events, and modern game architecture, bringing the Java Duke to life across multiple platforms without browser plugins."><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="robots" content="index,follow"><meta property="og:title" content="Building Cross-Platform Games with JavaFX: A Modern Game Engine Adventure"><meta property="og:description" content="Dive into an exciting journey of creating a versatile game engine that runs both on desktop and web browsers using JavaFX and GWT! Experience the perfect harmony of domain-driven design, CDI events, and modern game architecture, bringing the Java Duke to life across multiple platforms without browser plugins."><meta property="og:type" content="article"><meta property="og:url" content="https://www.mirkosertic.de/blog/2013/11/a-javafx-based-game-authoring-system/"><meta name="viewport" content="width=device-width,initial-scale=1"><link href="https://www.mirkosertic.de/css/site.css" rel="stylesheet" media="screen"><link rel="shortcut icon" type="image/x-icon" href="https://www.mirkosertic.de/favicon.ico"><link rel="apple-touch-icon" sizes="180x180" href="https://www.mirkosertic.de/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="https://www.mirkosertic.de/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="https://www.mirkosertic.de/favicon-16x16.png"><link rel="manifest" href="https://www.mirkosertic.de/manifest.json"><link rel="mask-icon" href="https://www.mirkosertic.de/safari-pinned-tab.svg" color="#5bbad5"><meta name="theme-color" content="#ffffff"></head><body itemscope itemtype="http://schema.org/WebPage"><header><nav class="navbar navbar-expand-md navbar-dark fixed-top" itemscope itemtype="http://www.schema.org/SiteNavigationElement"><div class="container"><a class="navbar-brand" href="https://www.mirkosertic.de/">www.mirkosertic.de</a> <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button><div class="collapse navbar-collapse" id="navbarCollapse"><ul class="navbar-nav mr-auto"><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/toolsgoodies" title="My personal Technology Radar">Technology Radar</a></li><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/interestingbooks" title="Interesting Books">Interesting Books</a></li><li class="nav-item"><a itemprop="url" class="nav-link" href="/global/favorites" title="My favorite postings">My favorite postings</a></li><li class="nav-item"><a itemprop="url" class="nav-link active" href="/post/" title="Blog">Blog</a></li></ul></div></div></nav></header><main role="main"><div itemprop="mainEntity" itemscope itemtype="http://schema.org/BlogPosting"><header class="post-header"><div class="contentbox"><h1 class="post-title" itemprop="name headline">Building Cross-Platform Games with JavaFX: A Modern Game Engine Adventure</h1><p class="post-date"><span class="icon"><i class="fa fa-calendar-check-o-white"></i></span><time datetime="2013-11-15" itemprop="datePublished">Fri, Nov 15, 2013</time> <span>by</span> <span itemprop="author" itemscope="" itemtype="https://schema.org/Person"><span itemprop="name"><a href="https://x.com/mirkosertic" itemprop="url" rel="author">Mirko Sertic</a></span></span></p><p class="post-abstract" itemprop="abstract"><span>This article explores the development of a cross-platform game engine and authoring system built with JavaFX and modern web technologies. The project demonstrates how to create a flexible game architecture using domain-driven design principles and CDI events, while achieving cross-platform compatibility through Java-to-JavaScript compilation with GWT. The system features a sophisticated JavaFX-based authoring tool, multiple rendering options including WebGL and HTML5 Canvas, and showcases how traditional Java technologies can be leveraged for modern game development without requiring browser plugins.</span></p><p><span class="icon"><i class="fa fa-clock-white"></i></span><span>7 Minutes reading time</span></p><p class="post-tags"><span class="tag"><span class="icon"><i class="fa fa-tags-white"></i></span><a href="/tags/html5">HTML5</a> ,<a href="/tags/interesting">Interesting</a> ,<a href="/tags/javafx">JavaFX</a> ,<a href="/tags/user-interface">User Interface</a> ,<a href="/tags/web">Web</a> ,<a href="/tags/javascript">JavaScript</a></span></p></div></header><article class="post-content clearfix" itemprop="articleBody"><div class="paragraph"><p>A few weeks ago I decided to enhance my knowledge in game coding, so I bought two very interesting books: “Real-Time Rendering, Third Edition by Thomas Akenine-Möller, Eric Haines and Nety Hoffmann” and “Game Coding Complete, Fourth Edition by Mike McShaffry and David “Rez” Graham”. After some insightful moments, hundreds of pages read and sleepless nights, I wanted to create my own game. So this project was born.</p></div><div class="paragraph"><p>Primary Goals</p></div><div class="ulist"><ul><li><p>Create a simple platform game with the Java Duke</p></li><li><p>Enhance my knowledge in JavaFX</p></li><li><p>Have fun doing some cool stuff</p></li></ul></div><div class="paragraph"><p>Secondary Goals</p></div><div class="ulist"><ul><li><p>Create a game engine and a user friendly game authoring tool with JavaFX</p></li><li><p>Make the game engine runnable on more than one device type(Desktop and Web)</p></li><li><p>Check what would be the best way to create complex UIs with JavaFX</p></li><li><p>Create a rich domain model for computer games</p></li><li><p>Apply domain-driven design to game engine architecture</p></li></ul></div><div class="paragraph"><p>Well, I have to say that I achieved all of these goals. Here is a screenshot of the JavaFX based authoring tool:</p></div><div class="paragraph"><p><span class="image"><img src="/media//game_auhoring_system.png" alt="game auhoring system"></span></p></div><div class="paragraph"><p>And the running game in Firefox deployed as a plain HTML website:</p></div><div class="paragraph"><p><span class="image"><img src="/media/game_firefox.png" alt="game firefox"></span></p></div><div class="paragraph"><p>and the game also running in Internet Explorer:</p></div><div class="paragraph"><p><span class="image"><img src="/media/game_internetexplorer.png" alt="game internetexplorer"></span></p></div><div class="paragraph"><p>Nice! Of course the game engine has some very cool features, like a flexible rule engine, physics support and sound!</p></div><div class="sect1"><h2 id="_the_game_authoring_system">The Game Authoring System</h2><div class="sectionbody"><div class="paragraph"><p>The authoring system is a JavaFX application. I used Java CDI(Context and Dependency Injection) for the UI(yes, CDI can also be used on UI side!). CDI has also a very cool feature, the CDI Events. Using CDI events, complex UI logic can be completely decoupled, and it greatly fits together with the Model-View-Presenter Pattern. Using this style of architecture, it is quite easy to split a complex user interface into separate modules, like the property browser, and project structure view and the game scene preview. When a user selects an object in the project structure, an event is fired using CDI. This event is observed by the property browser, the game scene preview and other components, so they can react by highlighting an object, showing its properties or even updating its game engine state. I really learned to love JavaFX and CDI!</p></div></div></div><div class="sect1"><h2 id="_the_core_game_engine">The Core Game Engine</h2><div class="sectionbody"><div class="paragraph"><p>The game engine is the heart of the system. Basically it is structured the following way:</p></div><div class="paragraph"><p><span class="image"><img src="/media//game_architecture.png" alt="game architecture"></span></p></div><div class="paragraph"><p>There are different game systems and game views. A game system for instance is the sound system or the physics system. A game view is the presentation of the game state for a user. The game systems and the game views are tied together in the game loop. For every frame rendered, the game loop is executed, every game system gets a chance to do something and finally the presentation is rendered by a game view.</p></div><div class="paragraph"><p>The different game systems are decoupled by an event dispatching system. Every object or game system can create or consume events. So pressing a key by a user creates a key pressed event, which is consumed by the duke object, knowing that it must jump now(This behavior is defined by a rule engine). So another event is created to inform the physics engine that a force must be applied to a given object. Now the physics system is called during the main loop, and it can run the physics simulation for a given amount of time. After that, update position events are fired by the physics game system informing the game domain model to update an object. Now the game view are called to render the game state to a device. All this happens during one step of the main game loop. What I have learned is that computer games are also a great appliance for event driven architecture!</p></div><div class="paragraph"><p>The game engine also defines a set of infrastructure services. These services are implemented by the renderers as described in the following chapters. Basically the core engine defines an abstract sound system API and gives the renderer an interface to the current game state as a kind of camera. The renderer can now implement the sound playing using the device dependent APIs and also use the camera to retrieve visible objects and render them to screen using any kind of graphics API.</p></div></div></div><div class="sect1"><h2 id="_the_javafx_renderergame_view">The JavaFX Renderer/Game View</h2><div class="sectionbody"><div class="paragraph"><p>The JavaFX renderer is a game view implementation. It renders the current game state with a JavaFX Canvas element. It also couples the main game loop with the JavaFX pulse event. A pulse is throttled at 60 frames per second maximum, and this frequency fits well together with the main game loop. Using the pulse event we can avoid different threads for the game loop and the rendering system, and the maximum of 60 frames per second is more than enough for most games.</p></div><div class="paragraph"><p>The JavaFX Renderer uses plain JaxaFX key events and passes them to the core event dispatching system. It also uses the Java Sound API to play music or other sound effects. The JavaFX renderer is basically used by the game authoring system as a preview for the game. The user interface for the web game view is a little bit more complicated as you will see in the following chapter.</p></div></div></div><div class="sect1"><h2 id="_the_web_renderergame_view">The Web Renderer/Game View</h2><div class="sectionbody"><div class="paragraph"><p>The web renderer is a different beast. The game engine is coded in Java, and there are also some very cool physics engines like JBox2D available which can be embedded as a game system. I really want to avoid Applets or other browser plugins, so do we really need to recode everything in plain JavaScript to make it runnable as a website? Short answer: no. There are different options available. For instance the bck2brwsr(Back to Browser) project, which implements a complete Java Virtual Machine in JavaScript.</p></div><div class="paragraph"><p>Another option is a Java-to-JavaScript compiler. And luckily, there is a very common compiler available, called GWT(Google Web Toolkit). GWT also supports HTML5 features like the Canvas element or even WebGL. For my project, I decided to go the GWT way and code a renderer using the HTML5 canvas technology. The amazing result was that the code of the GWT renderer is almost the same as the JavaFX Canvas renderer! Cool, different framework, almost the same API. Really nice! There is also a WebGL renderer available. It is used if the Browser supports WebGL. Modern Browsers do this for a long time, but Internet Explorer still does not. So the Web Renderer will by default use WebGL and fallback to Canvas if the Browser does not support WebGL. WebGL is based on OpenGL ES, so we can do a lot of cool stuff on the GPU with the programmable shader technology, but for my small game i will just draw some sprites:-)</p></div><div class="paragraph"><p>Reacting on user input can be tricky on the web. We can of course use plain old key pressed events and react on them the same way as seen in the JavaFX renderer. This is also implemented this way as GWT code. But what shall we do on touch devices?</p></div><div class="paragraph"><p>Well, we can use APIs like PhoneGap/Apache Cordova to react on touch events, or we can even use the device accelerometer as a kind of user feedback. This is something I will implement in a future version of the renderer. For now, I will just react on plain old key events.</p></div><div class="paragraph"><p>Update 02/2015 : In the meanwhile there are different Java2JavaScript transpiler frameworks such as Dragome or TeaVM available. You can see a comparison in the context of a this game engine here: <a href="https://www.mirkosertic.de/blog/2014/12/gwt-vs-dragome-vs-teavm-for-game-programming/">GWT vs. TeaVM vs. Dragome</a>.</p></div></div></div><div class="sect1"><h2 id="_conclusion">Conclusion</h2><div class="sectionbody"><div class="paragraph"><p>Cross platform games are doable with JavaFX and Java-to-JavaScript cross compilation using GWT. Domain-driven Design, CDI and domain events greatly fit together with game engine architecture, and compiling Java-to-JavaScript saves a lot of time and enables us to deploy games on different platforms. I really love JavaFX and game coding!</p></div><div class="paragraph"><p>Links:</p></div><div class="paragraph"><p>The source code is available for free on GitHub: <a href="https://github.com/mirkosertic/GameComposer">github.com/mirkosertic/GameComposer</a></p></div><div class="paragraph"><p>The Duke example game can be played here(WebGL with HTML5 Canvas fallback): <a href="http://mirkosertic.github.io/GameComposer/games/gwt/platformer/index.html">http://mirkosertic.github.io/GameComposer/games/gwt/platformer/index.html</a></p></div><div class="paragraph"><p>The GameComposer project website: <a href="http://mirkosertic.github.io/GameComposer">mirkosertic.github.io/GameComposer</a></p></div></div></div><div class="metainfo"><span>&lt;&lt;Pevious posting: <a href="https://www.mirkosertic.de/blog/2013/11/java-properties-reinvented/">Type-Safe Property Access in Java: The Owner Library Revolution</a></span> <span>Next posting: <a href="https://www.mirkosertic.de/blog/2014/06/how-to-create-user-and-eye-friendly-scannable-log4j-log-files/">Log4J Magic: Creating Human-Friendly, Scannable Log Files</a>&gt;&gt;</span></div><p><i class="fa fa-github"></i>Git revision: <a href="https://github.com/mirkosertic/www_mirkosertic_de/commit/2e692ad1fff282e93d9fa3fdd726190d7e7afd82" target="_blank">2e692ad</a></p></article></div></main><footer><p>&copy; Mirko Sertic &middot; <a href="https://www.mirkosertic.de/global/impressum/index.html">Imprint / Impressum</a></p><address><strong itemprop="name">Mirko Sertic</strong><div itemprop="address" itemscope itemtype="http://schema.org/PostalAddress"><div itemprop="streetAddress">Josefine-Mauser-Str. 66</div><div itemprop="postalCode">48157 Münster</div><div itemprop="addressCountry">Germany</div></div><a class="icon" target="_top" href="mailto:mirko@mirkosertic.de"><i class="fa fa-envelope-white"></i></a> <a class="icon" target="_blank" href="https://x.com/mirkosertic" itemprop="url"><i class="fa fa-x-twitter-white"></i></a> <a class="icon" target="_blank" href="https://github.com/mirkosertic" itemprop="url"><i class="fa fa-github-white"></i></a> <a class="icon" target="_blank" href="https://de.linkedin.com/in/mirko-sertic-98882397" itemprop="url"><i class="fa fa-linkedin-white"></i></a></address><p class="float-right"><a href="#">Back to top</a></p></footer><script src="https://www.mirkosertic.de/js/bootstrap-native-v4.min.js"></script><script>function existsByCSSSelector(aSelector) {
        var element = document.querySelector(aSelector);
        if (element) {
            return true;
        }
        return false;
    }

    var Loader = function () { };
    Loader.prototype = {
        require: function (scripts, callback) {
            this.loadCount = 0;
            this.totalRequired = scripts.length;
            this.callback = callback;

            for (var i=0;i<scripts.length;i++) {
                this.writeScript(scripts[i]);
            }
        },
        loaded: function (evt) {
            this.loadCount++;

            if (this.loadCount==this.totalRequired && typeof this.callback=='function') this.callback.call();
        },
        writeScript: function (src) {
            var self = this;
            var s = document.createElement('script');
            s.type = "text/javascript";
            s.async = true;
            s.src = src;
            s.addEventListener('load', function (e) { self.loaded(e); }, false);
            var head = document.getElementsByTagName('head')[0];
            head.appendChild(s);
        }
    };

    if (existsByCSSSelector("pre.highlight code") > 0) {
        var loader = new Loader();
        loader.require(["https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"], function() {

            var additionalStylesheet = document.createElement('link');
            additionalStylesheet.rel = "stylesheet";
            additionalStylesheet.type = 'text/css';
            additionalStylesheet.media = "screen";
            additionalStylesheet.href = "https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css";

            var head = document.getElementsByTagName('head')[0];
            head.appendChild(additionalStylesheet);

            hljs.highlightAll();
        });
    }</script></body></html>